# Allocation baseline (gc.alloc.rate.norm) — 2026-02-25
# JDK 17, 1 fork, 3 warmup × 1s, 5 iterations × 1s, -Xms256m -Xmx256m, -prof gc
# Commit: de5bb5a (isActive fast-path gate + method metadata cache + GC profiler)
#
# ── Zero-allocation invariants ──────────────────────────────────────────────────
# These benchmarks must stay at or near their current B/op.
# Any increase signals an accidental allocation in the fast path.
#
# context_enterExit_NOOP: NoopNarrativeContext — pure no-op, no allocations.
# proxy_noopContext:      Proxy with NoopNarrativeContext — only JDK proxy boxing overhead.
# proxy_OFF:              Proxy with TracingLevel.OFF — isActive() gate skips all work.
# agent_OFF:              ASM agent with TracingLevel.OFF — isActive() gate skips all work.
# directCall:             Direct method call (no proxy) — benchmark harness overhead only.
# spring_*:               Spring BPP with inactive context — delegates directly.
#
Benchmark                                                                    B/op
ContextOverheadBenchmark.context_enterExit_NOOP                             ≈ 0
ProxyOverheadBenchmark.directCall                                          56
ProxyOverheadBenchmark.proxy_noopContext                                   80
ProxyOverheadBenchmark.proxy_OFF                                           80
AgentOverheadBenchmark.agent_OFF                                           56
SpringOverheadBenchmark.spring_narrated_interpolated                       56
SpringOverheadBenchmark.spring_noAnnotations                               56
#
# proxy_noopContext delta vs directCall: 24 B/op (one Object[] for args)
# proxy_OFF delta vs directCall: 24 B/op (one Object[] for args)
# agent_OFF matches directCall: 0 B/op delta (bytecode-level, no boxing)
#
# ── Active-path footprints ──────────────────────────────────────────────────────
# These allocate by design (TraceNode, ParameterCapture, String rendering, etc.)
# Track for unexpected jumps (>2× indicates a regression).
#
Benchmark                                                                    B/op
ContextOverheadBenchmark.context_enterExit_OFF                             224
ContextOverheadBenchmark.context_enterExit_DETAIL                          432
ContextOverheadBenchmark.context_enterExit_ERRORS                          528
ContextOverheadBenchmark.context_enterExit_NARRATIVE                       528
ContextOverheadBenchmark.context_enterExit_FLOW                            680
ProxyOverheadBenchmark.proxy_notTraced                                     632
ProxyOverheadBenchmark.proxy_noAnnotations                                 680
ProxyOverheadBenchmark.proxy_onError                                       680
ProxyOverheadBenchmark.proxy_narrated_interpolated                         968
ProxyOverheadBenchmark.proxy_narrativeSummary                              992
ProxyOverheadBenchmark.proxy_narrated_static                              1008
AgentOverheadBenchmark.agent_noAnnotations                                 656
#
# ── Nesting depth scaling ───────────────────────────────────────────────────────
# Allocation scales linearly with call depth (~472 B/op per level).
#
Benchmark                                                                    B/op
NestingDepthBenchmark.nesting_depth_1                                      616
NestingDepthBenchmark.nesting_depth_10                                    4720
NestingDepthBenchmark.nesting_depth_50                                   23432
